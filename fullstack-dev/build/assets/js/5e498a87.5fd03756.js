"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[438],{7814:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var i=s(9729);const t={},o=i.createContext(t);function a(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(o.Provider,{value:n},e.children)}},9343:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"cookie-consent-management","title":"Cookie Consent Management for E-commerce Website","description":"Overview","source":"@site/docs/cookie-consent-management.md","sourceDirName":".","slug":"/cookie-consent-management","permalink":"/fullstack-dev/docs/cookie-consent-management","draft":false,"unlisted":false,"editUrl":"https://github.com/tamnk74/fullstack-dev/tree/main/docs-site/docs/cookie-consent-management.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Features","permalink":"/fullstack-dev/docs/features"},"next":{"title":"Testing","permalink":"/fullstack-dev/docs/testing"}}');var t=s(5813),o=s(7814);const a={},r="Cookie Consent Management for E-commerce Website",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Legal Requirements &amp; Compliance",id:"legal-requirements--compliance",level:2},{value:"GDPR (General Data Protection Regulation)",id:"gdpr-general-data-protection-regulation",level:3},{value:"CCPA (California Consumer Privacy Act)",id:"ccpa-california-consumer-privacy-act",level:3},{value:"ePrivacy Directive (Cookie Law)",id:"eprivacy-directive-cookie-law",level:3},{value:"Cookie Categories &amp; Classification",id:"cookie-categories--classification",level:2},{value:"1. Strictly Necessary Cookies",id:"1-strictly-necessary-cookies",level:3},{value:"2. Performance/Analytics Cookies",id:"2-performanceanalytics-cookies",level:3},{value:"3. Functional Cookies",id:"3-functional-cookies",level:3},{value:"4. Marketing/Advertising Cookies",id:"4-marketingadvertising-cookies",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Cookie Consent Library Selection",id:"cookie-consent-library-selection",level:3},{value:"Recommended Libraries:",id:"recommended-libraries",level:4},{value:"Next.js Implementation Example",id:"nextjs-implementation-example",level:3},{value:"1. Cookie Consent Provider",id:"1-cookie-consent-provider",level:4},{value:"2. Cookie Banner Component",id:"2-cookie-banner-component",level:4},{value:"3. Cookie Management Hook",id:"3-cookie-management-hook",level:4},{value:"4. Server-Side Cookie Handling (NestJS)",id:"4-server-side-cookie-handling-nestjs",level:4},{value:"5. Cookie Policy Page",id:"5-cookie-policy-page",level:4},{value:"UI/UX Design Guidelines",id:"uiux-design-guidelines",level:2},{value:"Design Principles",id:"design-principles",level:3},{value:"Banner Placement Options",id:"banner-placement-options",level:3},{value:"Color Scheme",id:"color-scheme",level:3},{value:"Integration with Analytics &amp; Marketing Tools",id:"integration-with-analytics--marketing-tools",level:2},{value:"Google Analytics 4 Integration",id:"google-analytics-4-integration",level:3},{value:"Facebook Pixel Integration",id:"facebook-pixel-integration",level:3},{value:"Testing &amp; Validation",id:"testing--validation",level:2},{value:"Automated Testing",id:"automated-testing",level:3},{value:"Manual Testing Checklist",id:"manual-testing-checklist",level:3},{value:"GDPR Compliance Testing",id:"gdpr-compliance-testing",level:3},{value:"Deployment Strategy",id:"deployment-strategy",level:2},{value:"Environment Configuration",id:"environment-configuration",level:3},{value:"Deployment Checklist",id:"deployment-checklist",level:3},{value:"Rollout Strategy",id:"rollout-strategy",level:3},{value:"Monitoring &amp; Maintenance",id:"monitoring--maintenance",level:2},{value:"Key Metrics to Track",id:"key-metrics-to-track",level:3},{value:"Monitoring Dashboard",id:"monitoring-dashboard",level:3},{value:"Maintenance Tasks",id:"maintenance-tasks",level:3},{value:"Weekly",id:"weekly",level:4},{value:"Monthly",id:"monthly",level:4},{value:"Quarterly",id:"quarterly",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Issue: Cookies not being removed after consent withdrawal",id:"issue-cookies-not-being-removed-after-consent-withdrawal",level:3},{value:"Issue: Scripts loading before consent",id:"issue-scripts-loading-before-consent",level:3},{value:"Issue: Banner not showing on Safari",id:"issue-banner-not-showing-on-safari",level:3},{value:"Legal Considerations",id:"legal-considerations",level:2},{value:"Documentation Requirements",id:"documentation-requirements",level:3},{value:"Regular Reviews",id:"regular-reviews",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cookie-consent-management-for-e-commerce-website",children:"Cookie Consent Management for E-commerce Website"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"This document provides a comprehensive guide for implementing a robust cookie consent management system for an e-commerce website, ensuring compliance with GDPR, CCPA, and other privacy regulations while maintaining optimal user experience and business functionality."}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#legal-requirements--compliance",children:"Legal Requirements & Compliance"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#cookie-categories--classification",children:"Cookie Categories & Classification"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#technical-implementation",children:"Technical Implementation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#uiux-design-guidelines",children:"UI/UX Design Guidelines"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#integration-with-analytics--marketing-tools",children:"Integration with Analytics & Marketing Tools"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#testing--validation",children:"Testing & Validation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#deployment-strategy",children:"Deployment Strategy"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#monitoring--maintenance",children:"Monitoring & Maintenance"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"legal-requirements--compliance",children:"Legal Requirements & Compliance"}),"\n",(0,t.jsx)(n.h3,{id:"gdpr-general-data-protection-regulation",children:"GDPR (General Data Protection Regulation)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Explicit Consent"}),": Users must actively opt-in for non-essential cookies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Granular Control"}),": Users must be able to choose specific cookie categories"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Withdrawal"}),": Users must be able to withdraw consent at any time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clear Information"}),": Cookie purposes must be clearly explained"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Legitimate Interest"}),": Must be properly documented and justified"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ccpa-california-consumer-privacy-act",children:"CCPA (California Consumer Privacy Act)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Right to Opt-Out"}),": Users must be able to opt-out of data selling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Do Not Sell My Personal Information"}),": Clear opt-out mechanism required"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Notice at Collection"}),": Users must be informed about data collection"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"eprivacy-directive-cookie-law",children:"ePrivacy Directive (Cookie Law)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prior Consent"}),": Consent must be obtained before placing cookies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Essential Cookies Exception"}),": Strictly necessary cookies don't require consent"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clear Information"}),": Purpose and duration of cookies must be explained"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cookie-categories--classification",children:"Cookie Categories & Classification"}),"\n",(0,t.jsx)(n.h3,{id:"1-strictly-necessary-cookies",children:"1. Strictly Necessary Cookies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Essential for website functionality\n",(0,t.jsx)(n.strong,{children:"Consent Required"}),": No\n",(0,t.jsx)(n.strong,{children:"Examples"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Session management"}),"\n",(0,t.jsx)(n.li,{children:"Authentication tokens"}),"\n",(0,t.jsx)(n.li,{children:"Shopping cart persistence"}),"\n",(0,t.jsx)(n.li,{children:"Load balancing"}),"\n",(0,t.jsx)(n.li,{children:"Security features"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface StrictlyNecessaryCookies {\n  sessionId: string;\n  authToken: string;\n  cartItems: string;\n  csrfToken: string;\n  loadBalancer: string;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-performanceanalytics-cookies",children:"2. Performance/Analytics Cookies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Website performance analysis and optimization\n",(0,t.jsx)(n.strong,{children:"Consent Required"}),": Yes\n",(0,t.jsx)(n.strong,{children:"Examples"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Google Analytics"}),"\n",(0,t.jsx)(n.li,{children:"Page load time tracking"}),"\n",(0,t.jsx)(n.li,{children:"Error monitoring"}),"\n",(0,t.jsx)(n.li,{children:"A/B testing"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface AnalyticsCookies {\n  googleAnalytics: '_ga' | '_gid' | '_gat';\n  hotjar: '_hjSessionUser_*' | '_hjSession_*';\n  mixpanel: 'mp_*';\n  amplitude: 'amplitude_*';\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-functional-cookies",children:"3. Functional Cookies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Enhanced user experience and personalization\n",(0,t.jsx)(n.strong,{children:"Consent Required"}),": Yes (recommended)\n",(0,t.jsx)(n.strong,{children:"Examples"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Language preferences"}),"\n",(0,t.jsx)(n.li,{children:"Currency selection"}),"\n",(0,t.jsx)(n.li,{children:"Recently viewed products"}),"\n",(0,t.jsx)(n.li,{children:"Wishlist items"}),"\n",(0,t.jsx)(n.li,{children:"Chat widgets"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface FunctionalCookies {\n  language: string;\n  currency: string;\n  recentlyViewed: string;\n  wishlist: string;\n  chatPreferences: string;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-marketingadvertising-cookies",children:"4. Marketing/Advertising Cookies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Targeted advertising and marketing campaigns\n",(0,t.jsx)(n.strong,{children:"Consent Required"}),": Yes\n",(0,t.jsx)(n.strong,{children:"Examples"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Facebook Pixel"}),"\n",(0,t.jsx)(n.li,{children:"Google Ads"}),"\n",(0,t.jsx)(n.li,{children:"Retargeting pixels"}),"\n",(0,t.jsx)(n.li,{children:"Social media plugins"}),"\n",(0,t.jsx)(n.li,{children:"Email marketing tracking"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface MarketingCookies {\n  facebookPixel: '_fbp' | '_fbc';\n  googleAds: '_gcl_au' | '_gcl_aw';\n  linkedIn: 'li_*';\n  twitter: 'twtr_*';\n  pinterest: '_pin_*';\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,t.jsx)(n.h3,{id:"cookie-consent-library-selection",children:"Cookie Consent Library Selection"}),"\n",(0,t.jsx)(n.h4,{id:"recommended-libraries",children:"Recommended Libraries:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CookieBot"})," (Enterprise solution)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OneTrust"})," (Enterprise solution)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Klaro"})," (Open source)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cookie Consent"})," (Custom implementation)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"nextjs-implementation-example",children:"Next.js Implementation Example"}),"\n",(0,t.jsx)(n.h4,{id:"1-cookie-consent-provider",children:"1. Cookie Consent Provider"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// lib/cookie-consent.tsx\n'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\n\nexport interface CookieConsent {\n  necessary: boolean;\n  analytics: boolean;\n  functional: boolean;\n  marketing: boolean;\n}\n\ninterface CookieConsentContextType {\n  consent: CookieConsent;\n  updateConsent: (newConsent: Partial<CookieConsent>) => void;\n  showBanner: boolean;\n  acceptAll: () => void;\n  rejectAll: () => void;\n  isLoaded: boolean;\n}\n\nconst CookieConsentContext = createContext<CookieConsentContextType | undefined>(undefined);\n\nconst CONSENT_COOKIE_NAME = 'cookie-consent';\nconst CONSENT_VERSION = '1.0';\n\nexport function CookieConsentProvider({ children }: { children: React.ReactNode }) {\n  const [consent, setConsent] = useState<CookieConsent>({\n    necessary: true, // Always true\n    analytics: false,\n    functional: false,\n    marketing: false,\n  });\n  const [showBanner, setShowBanner] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    // Load consent from localStorage or cookie\n    const savedConsent = loadConsentFromStorage();\n    if (savedConsent) {\n      setConsent(savedConsent);\n      setShowBanner(false);\n    } else {\n      setShowBanner(true);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  const updateConsent = (newConsent: Partial<CookieConsent>) => {\n    const updatedConsent = { ...consent, ...newConsent, necessary: true };\n    setConsent(updatedConsent);\n    saveConsentToStorage(updatedConsent);\n    setShowBanner(false);\n    \n    // Trigger consent change event\n    window.dispatchEvent(new CustomEvent('cookieConsentChange', {\n      detail: updatedConsent\n    }));\n  };\n\n  const acceptAll = () => {\n    updateConsent({\n      analytics: true,\n      functional: true,\n      marketing: true,\n    });\n  };\n\n  const rejectAll = () => {\n    updateConsent({\n      analytics: false,\n      functional: false,\n      marketing: false,\n    });\n  };\n\n  return (\n    <CookieConsentContext.Provider \n      value={{ \n        consent, \n        updateConsent, \n        showBanner, \n        acceptAll, \n        rejectAll, \n        isLoaded \n      }}\n    >\n      {children}\n    </CookieConsentContext.Provider>\n  );\n}\n\nexport const useCookieConsent = () => {\n  const context = useContext(CookieConsentContext);\n  if (!context) {\n    throw new Error('useCookieConsent must be used within CookieConsentProvider');\n  }\n  return context;\n};\n\nfunction loadConsentFromStorage(): CookieConsent | null {\n  try {\n    const stored = localStorage.getItem(CONSENT_COOKIE_NAME);\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      if (parsed.version === CONSENT_VERSION) {\n        return parsed.consent;\n      }\n    }\n  } catch (error) {\n    console.error('Error loading consent from storage:', error);\n  }\n  return null;\n}\n\nfunction saveConsentToStorage(consent: CookieConsent) {\n  try {\n    const toStore = {\n      consent,\n      version: CONSENT_VERSION,\n      timestamp: new Date().toISOString(),\n    };\n    localStorage.setItem(CONSENT_COOKIE_NAME, JSON.stringify(toStore));\n    \n    // Also set a cookie for server-side access\n    document.cookie = `${CONSENT_COOKIE_NAME}=${JSON.stringify(toStore)}; path=/; max-age=31536000; SameSite=Lax`;\n  } catch (error) {\n    console.error('Error saving consent to storage:', error);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"2-cookie-banner-component",children:"2. Cookie Banner Component"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// components/CookieBanner.tsx\n\'use client\';\n\nimport React, { useState } from \'react\';\nimport { useCookieConsent } from \'@/lib/cookie-consent\';\nimport { Button } from \'@/components/ui/button\';\nimport { Switch } from \'@/components/ui/switch\';\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle } from \'@/components/ui/sheet\';\n\nexport function CookieBanner() {\n  const { consent, updateConsent, showBanner, acceptAll, rejectAll } = useCookieConsent();\n  const [showDetails, setShowDetails] = useState(false);\n  const [tempConsent, setTempConsent] = useState(consent);\n\n  if (!showBanner) return null;\n\n  const handleSavePreferences = () => {\n    updateConsent(tempConsent);\n    setShowDetails(false);\n  };\n\n  return (\n    <>\n      {/* Cookie Banner */}\n      <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 p-4">\n        <div className="max-w-7xl mx-auto flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">\n          <div className="flex-1">\n            <h3 className="text-lg font-semibold mb-2">We use cookies</h3>\n            <p className="text-sm text-gray-600">\n              We use cookies to enhance your browsing experience, serve personalized content, \n              and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.\n            </p>\n          </div>\n          <div className="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">\n            <Button variant="outline" onClick={rejectAll}>\n              Reject All\n            </Button>\n            <Button variant="outline" onClick={() => setShowDetails(true)}>\n              Customize\n            </Button>\n            <Button onClick={acceptAll}>\n              Accept All\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Cookie Preferences Modal */}\n      <Sheet open={showDetails} onOpenChange={setShowDetails}>\n        <SheetContent className="w-full sm:max-w-md overflow-y-auto">\n          <SheetHeader>\n            <SheetTitle>Cookie Preferences</SheetTitle>\n            <SheetDescription>\n              Manage your cookie preferences. You can enable or disable different types of cookies below.\n            </SheetDescription>\n          </SheetHeader>\n          \n          <div className="space-y-6 mt-6">\n            {/* Strictly Necessary */}\n            <div className="space-y-2">\n              <div className="flex items-center justify-between">\n                <div>\n                  <h4 className="font-medium">Strictly Necessary</h4>\n                  <p className="text-sm text-gray-600">\n                    Essential for the website to function properly\n                  </p>\n                </div>\n                <Switch checked={true} disabled />\n              </div>\n            </div>\n\n            {/* Analytics */}\n            <div className="space-y-2">\n              <div className="flex items-center justify-between">\n                <div>\n                  <h4 className="font-medium">Analytics</h4>\n                  <p className="text-sm text-gray-600">\n                    Help us understand how visitors interact with our website\n                  </p>\n                </div>\n                <Switch \n                  checked={tempConsent.analytics} \n                  onCheckedChange={(checked) => \n                    setTempConsent(prev => ({ ...prev, analytics: checked }))\n                  }\n                />\n              </div>\n            </div>\n\n            {/* Functional */}\n            <div className="space-y-2">\n              <div className="flex items-center justify-between">\n                <div>\n                  <h4 className="font-medium">Functional</h4>\n                  <p className="text-sm text-gray-600">\n                    Enable enhanced functionality and personalization\n                  </p>\n                </div>\n                <Switch \n                  checked={tempConsent.functional} \n                  onCheckedChange={(checked) => \n                    setTempConsent(prev => ({ ...prev, functional: checked }))\n                  }\n                />\n              </div>\n            </div>\n\n            {/* Marketing */}\n            <div className="space-y-2">\n              <div className="flex items-center justify-between">\n                <div>\n                  <h4 className="font-medium">Marketing</h4>\n                  <p className="text-sm text-gray-600">\n                    Used to track visitors across websites for advertising purposes\n                  </p>\n                </div>\n                <Switch \n                  checked={tempConsent.marketing} \n                  onCheckedChange={(checked) => \n                    setTempConsent(prev => ({ ...prev, marketing: checked }))\n                  }\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className="flex flex-col gap-2 mt-6">\n            <Button onClick={handleSavePreferences}>\n              Save Preferences\n            </Button>\n            <Button variant="outline" onClick={() => setShowDetails(false)}>\n              Cancel\n            </Button>\n          </div>\n        </SheetContent>\n      </Sheet>\n    </>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"3-cookie-management-hook",children:"3. Cookie Management Hook"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// hooks/useCookieManager.ts\nimport { useEffect } from 'react';\nimport { useCookieConsent } from '@/lib/cookie-consent';\n\nexport function useCookieManager() {\n  const { consent, isLoaded } = useCookieConsent();\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    // Google Analytics\n    if (consent.analytics) {\n      loadGoogleAnalytics();\n    } else {\n      removeGoogleAnalytics();\n    }\n\n    // Facebook Pixel\n    if (consent.marketing) {\n      loadFacebookPixel();\n    } else {\n      removeFacebookPixel();\n    }\n\n    // Hotjar\n    if (consent.analytics) {\n      loadHotjar();\n    } else {\n      removeHotjar();\n    }\n\n  }, [consent, isLoaded]);\n\n  return { consent, isLoaded };\n}\n\nfunction loadGoogleAnalytics() {\n  if (typeof window === 'undefined') return;\n  \n  // Load Google Analytics script\n  const script = document.createElement('script');\n  script.src = `https://www.googletagmanager.com/gtag/js?id=${process.env.NEXT_PUBLIC_GA_ID}`;\n  script.async = true;\n  document.head.appendChild(script);\n\n  // Initialize gtag\n  window.dataLayer = window.dataLayer || [];\n  function gtag(...args: any[]) {\n    window.dataLayer.push(arguments);\n  }\n  window.gtag = gtag;\n  \n  gtag('js', new Date());\n  gtag('config', process.env.NEXT_PUBLIC_GA_ID, {\n    anonymize_ip: true,\n    cookie_flags: 'SameSite=Lax;Secure'\n  });\n}\n\nfunction removeGoogleAnalytics() {\n  // Remove GA cookies\n  const gaCookies = ['_ga', '_gid', '_gat_gtag_' + process.env.NEXT_PUBLIC_GA_ID];\n  gaCookies.forEach(cookie => {\n    document.cookie = `${cookie}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  });\n}\n\nfunction loadFacebookPixel() {\n  if (typeof window === 'undefined') return;\n  \n  // Facebook Pixel code\n  window.fbq = window.fbq || function() {\n    window.fbq.callMethod ? window.fbq.callMethod.apply(window.fbq, arguments) : \n    window.fbq.queue.push(arguments);\n  };\n  \n  if (!window._fbq) window._fbq = window.fbq;\n  window.fbq.push = window.fbq;\n  window.fbq.loaded = true;\n  window.fbq.version = '2.0';\n  window.fbq.queue = [];\n  \n  const script = document.createElement('script');\n  script.src = 'https://connect.facebook.net/en_US/fbevents.js';\n  script.async = true;\n  document.head.appendChild(script);\n  \n  window.fbq('init', process.env.NEXT_PUBLIC_FACEBOOK_PIXEL_ID);\n  window.fbq('track', 'PageView');\n}\n\nfunction removeFacebookPixel() {\n  // Remove Facebook Pixel cookies\n  const fbCookies = ['_fbp', '_fbc'];\n  fbCookies.forEach(cookie => {\n    document.cookie = `${cookie}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  });\n}\n\nfunction loadHotjar() {\n  if (typeof window === 'undefined') return;\n  \n  window.hj = window.hj || function() {\n    (window.hj.q = window.hj.q || []).push(arguments);\n  };\n  window._hjSettings = { hjid: process.env.NEXT_PUBLIC_HOTJAR_ID, hjsv: 6 };\n  \n  const script = document.createElement('script');\n  script.src = `https://static.hotjar.com/c/hotjar-${process.env.NEXT_PUBLIC_HOTJAR_ID}.js?sv=6`;\n  script.async = true;\n  document.head.appendChild(script);\n}\n\nfunction removeHotjar() {\n  // Remove Hotjar cookies\n  const hjCookies = Object.keys(document.cookie).filter(key => key.startsWith('_hj'));\n  hjCookies.forEach(cookie => {\n    document.cookie = `${cookie}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"4-server-side-cookie-handling-nestjs",children:"4. Server-Side Cookie Handling (NestJS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/middleware/cookie-consent.middleware.ts\nimport { Injectable, NestMiddleware } from '@nestjs/common';\nimport { Request, Response, NextFunction } from 'express';\n\n@Injectable()\nexport class CookieConsentMiddleware implements NestMiddleware {\n  use(req: Request, res: Response, next: NextFunction) {\n    const consentCookie = req.cookies['cookie-consent'];\n    \n    if (consentCookie) {\n      try {\n        const consent = JSON.parse(consentCookie);\n        req.cookieConsent = consent;\n      } catch (error) {\n        console.error('Error parsing cookie consent:', error);\n      }\n    }\n    \n    next();\n  }\n}\n\n// src/types/express.d.ts\ndeclare global {\n  namespace Express {\n    interface Request {\n      cookieConsent?: {\n        consent: {\n          necessary: boolean;\n          analytics: boolean;\n          functional: boolean;\n          marketing: boolean;\n        };\n        version: string;\n        timestamp: string;\n      };\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"5-cookie-policy-page",children:"5. Cookie Policy Page"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// app/cookie-policy/page.tsx\nexport default function CookiePolicyPage() {\n  return (\n    <div className="max-w-4xl mx-auto py-8 px-4">\n      <h1 className="text-3xl font-bold mb-6">Cookie Policy</h1>\n      \n      <div className="prose max-w-none">\n        <h2>What are cookies?</h2>\n        <p>\n          Cookies are small text files that are placed on your computer or mobile device \n          when you visit a website. They are widely used to make websites work more \n          efficiently and provide information to website owners.\n        </p>\n\n        <h2>How we use cookies</h2>\n        <p>\n          We use cookies for several reasons. Some cookies are required for technical \n          reasons in order for our website to operate, and we refer to these as \n          "essential" or "strictly necessary" cookies.\n        </p>\n\n        <h2>Types of cookies we use</h2>\n        \n        <h3>1. Strictly Necessary Cookies</h3>\n        <p>\n          These cookies are essential for you to browse the website and use its features.\n        </p>\n        <table className="min-w-full border border-gray-300">\n          <thead>\n            <tr>\n              <th className="border border-gray-300 px-4 py-2">Cookie Name</th>\n              <th className="border border-gray-300 px-4 py-2">Purpose</th>\n              <th className="border border-gray-300 px-4 py-2">Duration</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td className="border border-gray-300 px-4 py-2">sessionId</td>\n              <td className="border border-gray-300 px-4 py-2">Maintains user session</td>\n              <td className="border border-gray-300 px-4 py-2">Session</td>\n            </tr>\n            <tr>\n              <td className="border border-gray-300 px-4 py-2">cart_token</td>\n              <td className="border border-gray-300 px-4 py-2">Stores shopping cart items</td>\n              <td className="border border-gray-300 px-4 py-2">30 days</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <h3>2. Performance/Analytics Cookies</h3>\n        <p>\n          These cookies help us understand how visitors interact with our website.\n        </p>\n        <table className="min-w-full border border-gray-300">\n          <thead>\n            <tr>\n              <th className="border border-gray-300 px-4 py-2">Cookie Name</th>\n              <th className="border border-gray-300 px-4 py-2">Purpose</th>\n              <th className="border border-gray-300 px-4 py-2">Duration</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td className="border border-gray-300 px-4 py-2">_ga</td>\n              <td className="border border-gray-300 px-4 py-2">Google Analytics - distinguishes users</td>\n              <td className="border border-gray-300 px-4 py-2">2 years</td>\n            </tr>\n            <tr>\n              <td className="border border-gray-300 px-4 py-2">_gid</td>\n              <td className="border border-gray-300 px-4 py-2">Google Analytics - distinguishes users</td>\n              <td className="border border-gray-300 px-4 py-2">24 hours</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <h2>Managing your cookies</h2>\n        <p>\n          You can manage your cookie preferences at any time by clicking the "Cookie Settings" \n          link in our website footer or by using your browser settings.\n        </p>\n\n        <h2>Contact us</h2>\n        <p>\n          If you have any questions about our use of cookies, please contact us at \n          privacy@yourwebsite.com\n        </p>\n      </div>\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"uiux-design-guidelines",children:"UI/UX Design Guidelines"}),"\n",(0,t.jsx)(n.h3,{id:"design-principles",children:"Design Principles"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transparency"}),": Clear and honest communication about cookie usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"User Control"}),": Easy-to-use granular controls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Accessibility"}),": WCAG 2.1 AA compliant"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance"}),": Minimal impact on page load time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mobile-First"}),": Responsive design for all devices"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"banner-placement-options",children:"Banner Placement Options"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bottom of screen"}),": Most common, less intrusive"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Top of screen"}),": More prominent, harder to ignore"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modal overlay"}),": Maximum attention, can be disruptive"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Slide-in from corner"}),": Balanced approach"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"color-scheme",children:"Color Scheme"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:":root {\n  --cookie-banner-bg: #ffffff;\n  --cookie-banner-border: #e5e7eb;\n  --cookie-banner-text: #374151;\n  --cookie-banner-primary: #3b82f6;\n  --cookie-banner-secondary: #6b7280;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-analytics--marketing-tools",children:"Integration with Analytics & Marketing Tools"}),"\n",(0,t.jsx)(n.h3,{id:"google-analytics-4-integration",children:"Google Analytics 4 Integration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// utils/analytics.ts\nimport { useCookieConsent } from '@/lib/cookie-consent';\n\nexport function trackEvent(eventName: string, parameters?: any) {\n  const { consent } = useCookieConsent();\n  \n  if (consent.analytics && typeof window !== 'undefined' && window.gtag) {\n    window.gtag('event', eventName, {\n      ...parameters,\n      cookie_flags: 'SameSite=Lax;Secure'\n    });\n  }\n}\n\nexport function trackPurchase(transactionId: string, value: number, currency: string, items: any[]) {\n  const { consent } = useCookieConsent();\n  \n  if (consent.analytics && typeof window !== 'undefined' && window.gtag) {\n    window.gtag('event', 'purchase', {\n      transaction_id: transactionId,\n      value: value,\n      currency: currency,\n      items: items\n    });\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"facebook-pixel-integration",children:"Facebook Pixel Integration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// utils/facebook-pixel.ts\nimport { useCookieConsent } from '@/lib/cookie-consent';\n\nexport function trackFacebookEvent(eventName: string, parameters?: any) {\n  const { consent } = useCookieConsent();\n  \n  if (consent.marketing && typeof window !== 'undefined' && window.fbq) {\n    window.fbq('track', eventName, parameters);\n  }\n}\n\nexport function trackFacebookPurchase(value: number, currency: string) {\n  trackFacebookEvent('Purchase', {\n    value: value,\n    currency: currency\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing--validation",children:"Testing & Validation"}),"\n",(0,t.jsx)(n.h3,{id:"automated-testing",children:"Automated Testing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// __tests__/cookie-consent.test.tsx\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport { CookieConsentProvider, useCookieConsent } from '@/lib/cookie-consent';\n\nfunction TestComponent() {\n  const { consent, acceptAll, rejectAll } = useCookieConsent();\n  return (\n    <div>\n      <div data-testid=\"analytics-consent\">{consent.analytics.toString()}</div>\n      <button onClick={acceptAll}>Accept All</button>\n      <button onClick={rejectAll}>Reject All</button>\n    </div>\n  );\n}\n\ndescribe('Cookie Consent', () => {\n  test('should accept all cookies', () => {\n    render(\n      <CookieConsentProvider>\n        <TestComponent />\n      </CookieConsentProvider>\n    );\n\n    fireEvent.click(screen.getByText('Accept All'));\n    expect(screen.getByTestId('analytics-consent')).toHaveTextContent('true');\n  });\n\n  test('should reject all cookies', () => {\n    render(\n      <CookieConsentProvider>\n        <TestComponent />\n      </CookieConsentProvider>\n    );\n\n    fireEvent.click(screen.getByText('Reject All'));\n    expect(screen.getByTestId('analytics-consent')).toHaveTextContent('false');\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"manual-testing-checklist",children:"Manual Testing Checklist"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie banner appears on first visit"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie banner doesn't appear after consent is given"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",'"Accept All" button works correctly']}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",'"Reject All" button works correctly']}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Granular cookie settings work"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie preferences are persisted"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Analytics scripts load only with consent"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Marketing scripts load only with consent"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie banner is accessible via keyboard"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie banner works on mobile devices"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie policy page is accessible"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie settings can be changed later"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"gdpr-compliance-testing",children:"GDPR Compliance Testing"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consent Granularity"}),": Verify users can choose specific cookie categories"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Withdrawal"}),": Test that users can withdraw consent easily"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clear Information"}),": Ensure cookie purposes are clearly explained"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No Pre-ticked Boxes"}),": Verify non-essential cookies aren't pre-selected"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Legitimate Interest"}),": Test opt-out mechanisms for legitimate interest"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deployment-strategy",children:"Deployment Strategy"}),"\n",(0,t.jsx)(n.h3,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# .env.local\nNEXT_PUBLIC_GA_ID=GA_MEASUREMENT_ID\nNEXT_PUBLIC_FACEBOOK_PIXEL_ID=FB_PIXEL_ID\nNEXT_PUBLIC_HOTJAR_ID=HOTJAR_SITE_ID\nNEXT_PUBLIC_ENVIRONMENT=production\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deployment-checklist",children:"Deployment Checklist"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Environment variables configured"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cookie policy page deployed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Analytics integration tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Marketing pixels tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","GDPR compliance verified"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Performance impact measured"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Mobile responsiveness tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Accessibility testing completed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Legal review completed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Privacy policy updated"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"rollout-strategy",children:"Rollout Strategy"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Staging Environment"}),": Full testing with production-like data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Canary Release"}),": Deploy to 5% of users initially"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Gradual Rollout"}),": Increase to 25%, 50%, 100% over time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring"}),": Track consent rates and user behavior"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rollback Plan"}),": Quick revert if issues arise"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"monitoring--maintenance",children:"Monitoring & Maintenance"}),"\n",(0,t.jsx)(n.h3,{id:"key-metrics-to-track",children:"Key Metrics to Track"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// utils/consent-analytics.ts\nexport function trackConsentMetrics() {\n  const { consent } = useCookieConsent();\n  \n  // Track consent rates\n  trackEvent('cookie_consent_given', {\n    analytics_consent: consent.analytics,\n    functional_consent: consent.functional,\n    marketing_consent: consent.marketing\n  });\n}\n\nexport function trackConsentChanges(oldConsent: any, newConsent: any) {\n  trackEvent('cookie_consent_changed', {\n    analytics_changed: oldConsent.analytics !== newConsent.analytics,\n    functional_changed: oldConsent.functional !== newConsent.functional,\n    marketing_changed: oldConsent.marketing !== newConsent.marketing\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"monitoring-dashboard",children:"Monitoring Dashboard"}),"\n",(0,t.jsx)(n.p,{children:"Track these KPIs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consent Rate"}),": Percentage of users who accept cookies"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Category Acceptance"}),": Breakdown by cookie category"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Banner Interaction"}),": Click-through rates on different buttons"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance Impact"}),": Page load time impact"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Compliance Issues"}),": Failed consent recordings"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"maintenance-tasks",children:"Maintenance Tasks"}),"\n",(0,t.jsx)(n.h4,{id:"weekly",children:"Weekly"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Review consent rates and trends"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check for new cookie additions"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor performance metrics"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Review user feedback"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"monthly",children:"Monthly"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Update cookie inventory"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Review legal compliance"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Analyze consent patterns"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Update cookie policy if needed"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"quarterly",children:"Quarterly"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Legal compliance audit"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Performance optimization review"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","User experience testing"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Privacy impact assessment"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,t.jsx)(n.h3,{id:"issue-cookies-not-being-removed-after-consent-withdrawal",children:"Issue: Cookies not being removed after consent withdrawal"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Implement proper cookie cleanup functions"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function cleanupCookies(domain: string, cookieNames: string[]) {\n  cookieNames.forEach(name => {\n    // Remove from current domain\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n    // Remove from domain with dot prefix\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${domain};`;\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${domain};`;\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"issue-scripts-loading-before-consent",children:"Issue: Scripts loading before consent"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Use dynamic script loading based on consent"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function loadScriptWithConsent(src: string, consentType: keyof CookieConsent) {\n  const { consent } = useCookieConsent();\n  \n  if (consent[consentType]) {\n    const script = document.createElement('script');\n    script.src = src;\n    script.async = true;\n    document.head.appendChild(script);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"issue-banner-not-showing-on-safari",children:"Issue: Banner not showing on Safari"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Check for localStorage availability and fallback to cookies"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function isLocalStorageAvailable(): boolean {\n  try {\n    const testKey = '__localStorage_test__';\n    localStorage.setItem(testKey, 'test');\n    localStorage.removeItem(testKey);\n    return true;\n  } catch {\n    return false;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"legal-considerations",children:"Legal Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"documentation-requirements",children:"Documentation Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cookie inventory with purposes and durations"}),"\n",(0,t.jsx)(n.li,{children:"Legitimate interest assessments"}),"\n",(0,t.jsx)(n.li,{children:"Consent records with timestamps"}),"\n",(0,t.jsx)(n.li,{children:"Data processing agreements with third parties"}),"\n",(0,t.jsx)(n.li,{children:"Privacy impact assessments"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"regular-reviews",children:"Regular Reviews"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Update cookie inventory quarterly"}),"\n",(0,t.jsx)(n.li,{children:"Review consent rates and user feedback"}),"\n",(0,t.jsx)(n.li,{children:"Monitor regulatory changes"}),"\n",(0,t.jsx)(n.li,{children:"Conduct annual privacy audits"}),"\n",(0,t.jsx)(n.li,{children:"Update privacy policies as needed"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(n.p,{children:"Implementing a robust cookie consent management system requires careful consideration of legal requirements, user experience, and technical implementation. This document provides a comprehensive foundation for building a production-ready solution that ensures compliance while maintaining optimal website functionality."}),"\n",(0,t.jsx)(n.p,{children:"Remember to regularly review and update your implementation as regulations evolve and new requirements emerge. Always consult with legal experts for specific compliance advice in your jurisdiction."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);