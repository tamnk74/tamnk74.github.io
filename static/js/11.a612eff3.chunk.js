(this["webpackJsonpeng-app"]=this["webpackJsonpeng-app"]||[]).push([[11,12],{200:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));n(2);var a=n(4);function c(){return Object(a.jsx)("div",{children:"Oopss ... Not found"})}},296:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(18),i=n(200),o=n(19),s=n(84),l=n(38),u=n(39),d=n(4),b=["component"];function j(e){var t=e.component,n=Object(s.a)(e,b),a=Object(l.c)(u.b);return Object(d.jsx)(r.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return a?Object(d.jsx)(t,Object(o.a)({},e)):Object(d.jsx)(r.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))}var p=n(170),O=n(213),f=n(13),h=n.n(f),m=n(27),g=n(81),x=n(35),v=n(87),w=n(36),y=n(185),S=n(206),C=n(301),N=n(282),k=n(295),T=n(284),P=n(98),I=n.n(P),D=["onChange"];function E(e){var t=e.onChange,n=Object(s.a)(e,D),a=Object(l.c)(v.b),r=Object(l.b)(),i=c.a.useState([]),u=Object(g.a)(i,2),b=u[0],j=u[1];return c.a.useEffect((function(){a.length||r(Object(x.b)()),j(a.map((function(e){return"".concat(e.name)})))}),[a]),Object(d.jsx)(C.a,Object(o.a)(Object(o.a)({},n),{},{fullWidth:!0,freeSolo:!0,onClose:function(e){return t(e)},disableClearable:!0,id:"category-input",options:b,renderInput:function(e){return Object(d.jsx)(k.a,Object(o.a)(Object(o.a)({},e),{},{label:"Name"}))}}))}var R=["ref"],A=Object(p.a)((function(e){return{form:{width:"100%",margin:e.spacing(0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)}}}));function U(e){var t,n,a=e.onSubmit,c=e.category,r=A(),i=Object(S.b)(),l=i.handleSubmit,u=i.formState.errors,b=i.control,j=i.setValue,p=i.reset,f=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={name:"",description:""},a({name:t.name,description:null!==(n=t.description)&&void 0!==n?n:""},c),p(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("form",{onSubmit:function(e){e.stopPropagation(),l(f)(e)},className:r.form,children:Object(d.jsxs)(O.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(d.jsxs)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:r.input,children:[Object(d.jsx)(S.a,{name:"name",fullWidth:!0,control:b,rules:{required:!0},defaultValue:null!==(t=c.name)&&void 0!==t?t:"",placeholder:"Name",render:function(e){var t=e.field,n=(t.ref,Object(s.a)(t,R)),a=e.fieldState;return Object(d.jsx)(E,Object(o.a)(Object(o.a)(Object(o.a)({},n),a),{},{error:u.name,onChange:function(e){j("name",e.currentTarget.value,{shouldValidate:!0})}}))}}),u.title&&Object(d.jsx)("span",{children:"Title is required"})]}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:r.input,children:Object(d.jsx)(S.a,{name:"description",control:b,defaultValue:null!==(n=c.description)&&void 0!==n?n:"",render:function(e){var t=e.field;return Object(d.jsx)(k.a,Object(o.a)(Object(o.a)({},t),{},{fullWidth:!0,label:"Description"}))}})}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:r.input,children:Object(d.jsx)(N.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})})]})})}var B=Object(p.a)((function(e){return{form:{width:"100%",margin:e.spacing(0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function V(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(".concat(-50,"%, ").concat(-50,"%)")}}function W(e){var t=e.category,n=void 0===t?{}:t,c=e.open,r=void 0!==c&&c,i=e.handleClose,o=e.title,s=void 0===o?"Add new category":o,u=B(),b=Object(l.b)(),j=Object(a.useState)(V),p=Object(g.a)(j,1)[0];return Object(d.jsx)(y.a,{open:r,onClose:i,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(d.jsxs)("div",{style:p,className:u.paper,children:[Object(d.jsx)("h2",{children:s}),Object(d.jsx)(U,{category:n,onSubmit:function(e){return b(Object(x.a)(e)),i(),b(Object(x.b)({limit:1e3}))}})]})})}var L=n(25),z={handleUploadImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"images",n=L.c.ref().child("".concat(t,"/").concat(e.name)).put(e.data);return new Promise((function(e,t){n.on(L.b.storage.TaskEvent.STATE_CHANGED,(function(){}),(function(e){t(e)}),(function(){n.snapshot.ref.getDownloadURL().then((function(t){e(t)}))}))}))}},q=n(86),F=["onChange"];function G(e){var t=e.onChange,n=Object(s.a)(e,F),a=Object(l.c)(q.b),r=c.a.useState([]),i=Object(g.a)(r,2),u=i[0],b=i[1];return c.a.useEffect((function(){b(a.map((function(e){return"".concat(e.title)})))}),[a]),Object(d.jsx)(C.a,Object(o.a)(Object(o.a)({},n),{},{fullWidth:!0,freeSolo:!0,onClose:function(e){return t(e)},disableClearable:!0,id:"phrase-input",options:u,renderInput:function(e){return Object(d.jsx)(k.a,Object(o.a)(Object(o.a)({},e),{},{label:"Title"}))}}))}var H=n(283),_=n(222),J=n(214),M=Object(p.a)((function(e){return{input:{width:"100%",margin:e.spacing(0,0,2)},imgPreview:{width:"240px"}}}));function K(e){var t=e.onChange,n=M(),c=Object(a.useState)(null),r=Object(g.a)(c,2),i=r[0],o=r[1],s=Object(a.useRef)("unknown.png");return Object(a.useEffect)((function(){document.onpaste=function(e){for(var n=(e.clipboardData||e.originalEvent.clipboardData).items,a=0;a<n.length;a++){var c=n[a];if(-1!==c.type.indexOf("image")){var r=c.getAsFile();s.current=r,t(s.current);var i=new FileReader;i.onload=function(e){o(e.target.result)},i.readAsDataURL(r)}}}}),[]),Object(d.jsx)("div",{className:n.input,children:Object(d.jsxs)(_.a,{className:n.imgPreview,children:[i&&Object(d.jsx)(H.a,{children:Object(d.jsx)("img",{src:i,id:"file",width:"240",height:"180",alt:"Preview"})}),Object(d.jsxs)(J.a,{children:[i&&Object(d.jsx)(N.a,{size:"small",color:"primary",onClick:function(){o(null),s.current=null,t(null)},children:"Remove"}),!i&&Object(d.jsx)("input",{type:"file",id:"file",onChange:function(e){var n=e.target.files[0];if(n){s.current=n,t(s.current);var a=new FileReader;a.readAsDataURL(n),a.onloadend=function(){o(a.result)}}}})]})]})})}var Q=["ref"],X=Object(p.a)((function(e){return{form:{width:"100%",margin:e.spacing(0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)},inputGroup:{width:"100%","& > * + *":{marginTop:e.spacing(3)},display:"flex",flexDirection:"row"},dropdown:{width:"calc(100% - 56px)"},addBtn:{width:"56px",marginTop:0}}}));function Y(e){var t,n=e.addPhrase,c=e.phrase,r=void 0===c?{}:c,i=X(),b=Object(l.c)(v.b),j=Object(l.c)(u.b),p=Object(a.useState)(!1),f=Object(g.a)(p,2),x=f[0],w=f[1],y=Object(a.useState)(null),P=Object(g.a)(y,2),D=P[0],E=P[1],R=Object(S.b)(),A=R.handleSubmit,U=R.setValue,B=R.formState.errors,V=R.control,L=R.reset,q=function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=D,!e.t0){e.next=5;break}return e.next=4,z.handleUploadImage({data:D,name:"".concat(t.title.trim().replace(/\s/g,"_"),".png")});case 4:e.t0=e.sent;case 5:a=e.t0,n(Object(o.a)(Object(o.a)({},t),{},{meaning:t.meaning||"",image:a||r.image||"",userId:j.uid}),r),L({title:"",meaning:r.meaning||"",image:r.image||"",categories:r&&r.categories||[]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("form",{onSubmit:A(q),className:i.form,children:[Object(d.jsxs)(O.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:[Object(d.jsxs)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:i.input,children:[Object(d.jsx)(S.a,{name:"title",fullWidth:!0,control:V,rules:{required:!0},defaultValue:r.title||"",placeholder:"Phrase",render:function(e){var t=e.field,n=(t.ref,Object(s.a)(t,Q)),a=e.fieldState;return Object(d.jsx)(G,Object(o.a)(Object(o.a)(Object(o.a)({},n),a),{},{error:B.title,onChange:function(e){U("title",e.currentTarget.value,{shouldValidate:!0})}}))}}),B.title&&Object(d.jsx)("span",{children:"Title is required"})]}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:i.input,children:Object(d.jsx)(S.a,{name:"meaning",control:V,defaultValue:null!==(t=r.meaning)&&void 0!==t?t:"",render:function(e){var t=e.field;return Object(d.jsx)(k.a,Object(o.a)(Object(o.a)({},t),{},{fullWidth:!0,label:"Meaning"}))}})}),Object(d.jsxs)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:i.inputGroup,children:[Object(d.jsx)(S.a,{name:"categories",render:function(e){var t=e.field;return Object(d.jsx)(C.a,Object(o.a)(Object(o.a)({},t),{},{multiple:!0,id:"categories-input",options:b.map((function(e){return e.id})),getOptionLabel:function(e){var t=b.find((function(t){return t.id===e}));return t&&t.name},className:i.dropdown,renderInput:function(e){return Object(d.jsx)(k.a,Object(o.a)(Object(o.a)({},e),{},{label:"Categories",placeholder:"Categories"}))},onChange:function(e,n){return t.onChange(n)}}))},control:V,defaultValue:r.categories||[]}),Object(d.jsx)(T.a,{color:"primary","aria-label":"add",className:i.addBtn,onClick:function(){w(!0)},children:Object(d.jsx)(I.a,{})})]}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:i.input,children:Object(d.jsx)(K,{onChange:function(e){return E(e)}})}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,spacing:1,className:i.input,children:Object(d.jsxs)(N.a,{type:"submit",variant:"contained",color:"primary",children:[" ","Submit"," "]})})]}),Object(d.jsx)(W,{open:x,handleClose:function(){w(!1)}})]})}var Z=Object(p.a)((function(e){return{form:{width:"100%",margin:e.spacing(0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function $(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(".concat(-50,"%, ").concat(-50,"%)")}}function ee(e){var t=e.updatePhrase,n=e.phrase,c=void 0===n?{}:n,r=e.open,i=void 0!==r&&r,o=e.handleClose,s=Z(),l=Object(a.useState)($),u=Object(g.a)(l,1)[0];return Object(d.jsx)(y.a,{open:i,onClose:o,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(d.jsx)("div",{style:u,className:s.paper,children:Object(d.jsx)(Y,{addPhrase:t,phrase:c})})})}var te=n(304),ne=n(75),ae=n(233),ce=n.n(ae),re=n(285),ie=n(232),oe=n.n(ie),se=n(286),le=n(303),ue=n(287),de=n(288),be=n(289),je=n(226),pe=n(227),Oe=n.n(pe),fe=n(228),he=n.n(fe),me=n(230),ge=n.n(me),xe=n(229),ve=n.n(xe),we=n(231),ye=n.n(we),Se=Object(p.a)((function(){return{input:{width:"100%",display:"flex"},audio:{height:"15px"},micBtn:{borderRadius:"50%",width:"40px",height:"40px"}}}));function Ce(e){var t=e.userId,n=e.phraseId,c=Se(),r=Object(a.useState)(null),i=Object(g.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)(null),u=Object(g.a)(l,2),b=u[0],j=u[1],p=Object(a.useState)(),O=Object(g.a)(p,2),f=O[0],h=O[1],m=function(){j(null),s(je.a.START)};return Object(a.useEffect)((function(){L.c.ref().child("audios/".concat(t,"/").concat(n,".wav")).getDownloadURL().then((function(e){return h(e)})).catch((function(){}))}),[]),Object(d.jsxs)("div",{className:c.input,children:[Object(d.jsx)(je.b,{canvasWidth:o!==je.a.STOP?"100px":"0px",canvasHeight:o!==je.a.STOP?"20px":"0px",state:o,onStop:function(e){j(e)}}),(b||f)&&Object(d.jsx)("audio",{controls:!0,className:c.audio,children:Object(d.jsx)("source",{src:b?b.url:f})}),(o===je.a.STOP||!o)&&Object(d.jsx)("button",{type:"button",className:"micBtn",onClick:m,children:Object(d.jsx)(Oe.a,{})}),o===je.a.START&&Object(d.jsx)("button",{type:"button",className:"micBtn",onClick:function(){s(je.a.PAUSE)},children:Object(d.jsx)(he.a,{})}),o===je.a.PAUSE&&Object(d.jsx)("button",{type:"button",className:"micBtn",onClick:m,children:Object(d.jsx)(ve.a,{})}),o!==je.a.STOP&&Object(d.jsx)("button",{type:"button",className:"micBtn",onClick:function(){s(je.a.STOP)},children:Object(d.jsx)(ge.a,{})}),b&&t&&n&&Object(d.jsx)("button",{type:"button",className:"micBtn",onClick:function(){var e=L.c.ref().child("audios/".concat(t,"/").concat(n,".wav")).put(b.blob);e.on(L.b.storage.TaskEvent.STATE_CHANGED,(function(){}),(function(e){throw e}),(function(){e.snapshot.ref.getDownloadURL().then((function(e){console.log("uploaded",e)}))}))},children:Object(d.jsx)(ye.a,{})})]})}function Ne(){return(Ne=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new SpeechSynthesisUtterance(t)).lang="en-US",e.abrupt("return",window.speechSynthesis.speak(n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=Object(p.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},chip:{padding:"5px 20px 0px 20px"},title:{fontSize:14},pos:{marginBottom:12},actions:{display:"flex",flexDirection:"column",justifyContent:"space-between"},audioInput:{alignSelf:"flex-end"}}}));function Te(e){var t,n=e.phrase,a=e.isUpdate,r=e.categories,i=e.handleOpen,o=e.handleDelete,s=ke(),b=Object(l.c)(u.b),j=c.a.useState(!1),p=Object(g.a)(j,2),O=p[0],f=p[1],h=function(){f(!1)},m=r.filter((function(e){return n.categories&&n.categories.includes(e.id)})),x=c.a.useState(!1),v=Object(g.a)(x,2),w=v[0],y=v[1];return Object(d.jsxs)(le.a,{expanded:"panel1"===w,onChange:(t="panel1",function(e,n){y(!!n&&t)}),className:s.root,children:[Object(d.jsxs)(re.a,{expandIcon:Object(d.jsx)(oe.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(d.jsx)("div",{className:s.heading,children:m.length?m.map((function(e){return Object(d.jsx)(te.a,{label:e.name,color:"primary"},e.id)})):"Word of the Day"}),Object(d.jsx)(ne.a,{className:s.secondaryHeading,children:n.title})]}),Object(d.jsxs)(se.a,{children:[n.image&&Object(d.jsx)("img",{src:n.image,alt:n.title,width:"360",height:"240"}),Object(d.jsx)("div",{className:"content",children:Object(d.jsx)(ne.a,{children:n.meaning})}),Object(d.jsxs)("div",{className:s.actions,children:[Object(d.jsxs)(J.a,{children:[Object(d.jsx)(N.a,{size:"small",type:"button",onClick:function(){return function(e){return Ne.apply(this,arguments)}(n.title)},children:Object(d.jsx)(ce.a,{})}),a&&Object(d.jsx)(N.a,{size:"small",type:"button",onClick:function(){return i(n)},children:"Edit"}),a&&Object(d.jsx)(N.a,{size:"small",type:"button",onClick:function(){f(!0)},children:"Delete"})]}),Object(d.jsx)("div",{className:s.audioInput,children:Object(d.jsx)(Ce,{phraseId:n.id,userId:b&&b.uid})})]})]}),Object(d.jsxs)(ue.a,{open:O,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(d.jsx)(de.a,{id:"alert-dialog-title",children:"Are you sure to remove this phrase?"}),Object(d.jsxs)(be.a,{children:[Object(d.jsx)(N.a,{onClick:h,children:"Cancel"}),Object(d.jsx)(N.a,{onClick:function(){return o(n)},color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}var Pe=Object(p.a)((function(e){return{root:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},list:{flexGrow:1},gridList:{},icon:{color:"rgba(255, 255, 255, 0.54)"}}}));function Ie(e){var t=e.phrases,n=e.options,c=Object(l.c)(u.b),r=Object(l.c)(v.b),i=Object(a.useState)(),s=Object(g.a)(i,2),b=s[0],j=s[1],p=Pe(),O=Object(l.b)(),f=Object(a.useState)(!1),y=Object(g.a)(f,2),S=y[0],C=y[1],N=function(e){j(e),C(!0)},k=function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(Object(w.c)(t.id));case 2:return e.abrupt("return",O(Object(w.b)(n)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(Object(w.d)(Object(o.a)(Object(o.a)({},a),t)));case 2:return C(!1),e.abrupt("return",O(Object(w.b)(n)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O(Object(w.b)(n)),O(Object(x.b)({limit:1e3}))}),[]),Object(d.jsxs)("div",{className:p.root,children:[t.map((function(e){return Object(d.jsx)(Te,{phrase:e,isUpdate:c&&(c.uid===e.userId||!e.userId),categories:r,handleOpen:N,handleDelete:k},e.id)})),Object(d.jsx)(ee,{open:S,handleClose:function(){C(!1)},phrase:b,updatePhrase:T})]})}var De=n(299),Ee=n(234),Re=n.n(Ee),Ae=Object(p.a)((function(e){return{body:{padding:e.spacing(1,0,0,0)},form:{width:"100%",padding:e.spacing(0,0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)}}}));function Ue(){var e=Ae(),t=Object(l.b)(),n=Object(l.c)(q.d),c=Object(l.c)(q.e),r=Re()((function(e){t(Object(q.g)(Object(o.a)(Object(o.a)({},n),{},{query:e.target.value})))}),500);return Object(a.useEffect)((function(){t(Object(w.b)(n))}),[n]),Object(d.jsxs)(O.a,{container:!0,className:e.body,children:[Object(d.jsx)(k.a,{id:"search",label:"Search",onChange:r}),Object(d.jsx)(De.a,{count:n.totalPage,page:n.page,onChange:function(e,a){var c=Object(o.a)(Object(o.a)({},n),{},{page:a});t(Object(q.g)(c))},showFirstButton:!0,showLastButton:!0}),Object(d.jsx)(Ie,{phrases:c,options:n})]})}var Be=Object(p.a)((function(e){return{body:{padding:e.spacing(1,0,0,0)},form:{width:"100%",padding:e.spacing(0,0,0,2)},input:{padding:e.spacing(1,0),margin:e.spacing(.2,0,0,0)}}}));function Ve(){var e=Be(),t=Object(l.b)(),n=function(){var e=Object(m.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(w.a)(n)),t(Object(w.b)({limit:50,page:1}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=Object(l.c)(q.d),c=Object(l.c)(q.e);return Object(d.jsxs)(O.a,{container:!0,direction:"row",alignItems:"flex-start",className:e.body,children:[Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,className:e.form,children:Object(d.jsx)(Y,{addPhrase:n})}),Object(d.jsx)(O.a,{container:!0,item:!0,xs:12,className:e.form,children:Object(d.jsx)(Ie,{phrases:c,options:a})})]})}t.default=function(){var e=Object(r.h)();return Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{exact:!0,path:e.url,component:Ue}),Object(d.jsx)(j,{path:"".concat(e.url,"/new"),component:Ve}),Object(d.jsx)(r.b,{component:i.default})]})}}}]);
//# sourceMappingURL=11.a612eff3.chunk.js.map